<div class="container">
  <div fxLayout="row">
    <div fxLayout="column" fxFlex="30">
      <mat-card class="custom-filters">
        <!-- study level -->
        <mat-card-subtitle>{{ 'filters.study_level' | translate }}</mat-card-subtitle>
        <mat-card-content>
          <mat-radio-group fxLayout="column" [(ngModel)]="studyLevel">
            <mat-radio-button *ngFor="let category of categories" [value]="category">
              {{ category }}
            </mat-radio-button>
          </mat-radio-group>
        </mat-card-content>
        <!-- inputs -->
        <mat-card-subtitle>{{ 'filters.keywords.label' | translate }}</mat-card-subtitle>
        <mat-card-content>
          <!-- keywords search -->
          <mat-form-field fxFlexFill>
            <input matInput placeholder="{{ 'filters.keywords.name' | translate }}" [formControl]="keywordsSearch">
          </mat-form-field>
          <!-- description search -->
          <mat-form-field fxFlexFill>
            <input matInput placeholder="{{ 'filters.keywords.description' | translate }}"
              [formControl]="descriptionSearch">
          </mat-form-field>
          <!-- locatin search -->
          <mat-form-field fxFlexFill>
            <mat-label>{{ 'filters.keywords.location.label' | translate }}</mat-label>
            <mat-select [formControl]="locations">
              <mat-select-trigger>
                {{locations.value ? locations.value === 'all_locations' ? ('filters.keywords.location.all_locations' | translate) : locations.value : '' }}
              </mat-select-trigger>
              <mat-option value="all_locations">{{ 'filters.keywords.location.all_locations' | translate }}</mat-option>
              <mat-option *ngFor="let location of locationsList" [value]="location">{{ location }}</mat-option>
            </mat-select>
          </mat-form-field>
          <!-- facilities search -->
          <mat-form-field fxFlexFill *ngIf="studyLevel === 'University'">
            <mat-label>{{ 'filters.keywords.facilities.label' | translate }}</mat-label>
            <mat-select [formControl]="facilities" multiple>
              <mat-select-trigger>
                {{facilities.value ? (facilities.value[0] | translate) : ''}}
                <span *ngIf="facilities.value?.length > 1" class="example-additional-selection">
                  (+{{facilities.value.length - 1}} {{facilities.value?.length === 2 ? 'other' : 'others'}})
                </span>
              </mat-select-trigger>
              <mat-option *ngFor="let facility of facilitiesList" [value]="facility">
                {{ facility | instantFacilityTranslate }}</mat-option>
            </mat-select>
          </mat-form-field>
        </mat-card-content>
        <!-- rating -->
        <mat-card-subtitle>{{ 'filters.sort_rating' | translate }}</mat-card-subtitle>
        <mat-card-content>
          <mat-radio-group fxLayout="column" [(ngModel)]="ratingType">
            <mat-radio-button *ngFor="let sort of sortTypes " [value]="sort">
              {{ sort }}
            </mat-radio-button>
          </mat-radio-group>
        </mat-card-content>
        <!-- type -->
        <mat-card-subtitle *ngIf="studyLevel === 'University'">{{ 'filters.institution_type.label' | translate }}
        </mat-card-subtitle>
        <mat-card-content fxLayout="column" *ngIf="studyLevel === 'University'">
          <mat-checkbox [(ngModel)]="institutionState">{{ 'filters.institution_type.state' | translate }}</mat-checkbox>
          <mat-checkbox [(ngModel)]="institutionPrivate">{{ 'filters.institution_type.private' | translate }}
          </mat-checkbox>
        </mat-card-content>
      </mat-card>
    </div>

    <div fxFlex="70">
      <div class="grey-text">{{ getData().length }} {{ 'filters.result_counter' | translate }}</div>
      <div class="results-cards">
        <div *ngFor="let result of getData()">
          <!-- university results -->
          <mat-card class="custom-card" fxLayout="column" fxLayoutAlign="center center"
            *ngIf="studyLevel === 'University'">
            <img mat-card-image src="{{ result.logoUniversity }}" *ngIf="result.logoUniversity">
            <img mat-card-image src="assets/university.png" *ngIf="!result.logoUniversity">
            <mat-card-content>
              <p class="dark-blue-bold-text">{{ result.nameUniversity | uppercase }}</p>
              <p class="grey-text" *ngIf="result.locationUniversity[0]">{{ result.locationUniversity[0] }}</p>
              <p>{{ result.rating ? result.rating : 0 }} ★</p>
              <p>
                {{ result.facultiesUniversity.length }} {{ 'filters.faculties_counter' | translate }}
              </p>
            </mat-card-content>
            <button mat-button fxFlexFill
              (click)="goToUniversity(result.universityId)">{{ 'buttons.more_details' | translate | uppercase }}</button>
          </mat-card>
          <!-- faculty results -->
          <mat-card class="custom-card" fxLayout="column" fxLayoutAlign="center center"
            *ngIf="studyLevel === 'Faculty'">
            <img mat-card-image src="{{ result.logoFaculty }}" *ngIf="result.logoFaculty">
            <img mat-card-image src="assets/university.png" *ngIf="!result.logoFaculty">
            <mat-card-content>
              <p class="dark-blue-bold-text">{{ result.nameFaculty | uppercase }}</p>
              <p class="grey-text" *ngIf="result.locationFaculty">{{ result.locationFaculty | location }}</p>
              <p>{{ result.ratingFaculty ? result.ratingFaculty : 0 }} ★</p>
              <p *ngIf="result.bachelors">
                {{ result.bachelors.length }} {{ 'filters.counter_bachelors' | translate }}
              </p>
              <p *ngIf="result.masters">
                {{ result.masters.length }} {{ 'filters.counter_masters' | translate }}
              </p>
              <p *ngIf="result.doctorals">
                {{ result.doctorals.length }} {{ 'filters.counter_doctorals' | translate }}
              </p>
            </mat-card-content>
            <button mat-button fxFlexFill
              (click)="goToFaculty(result.facultyId)">{{ 'buttons.more_details' | translate | uppercase }}</button>
          </mat-card>
          <!-- bachelor results -->
          <mat-card class="custom-card" fxLayout="column" fxLayoutAlign="center center"
            *ngIf="studyLevel === 'Bachelor'">
            <img mat-card-image src="{{ result.logoFaculty }}" *ngIf="result.logoFaculty">
            <img mat-card-image src="assets/university.png" *ngIf="!result.logoFaculty">
            <mat-card-content>
              <p class="dark-blue-bold-text">{{ result.name | uppercase }}</p>
              <p class="grey-text" *ngIf="result.locationFaculty">{{ result.locationFaculty | location }}</p>
              <p>{{ result.ratingFaculty ? result.ratingFaculty : 0 }} ★</p>
              <p *ngIf="result.semesters">
                {{ result.semesters }} {{ 'filters.counter_semesters' | translate }}
              </p>
              <p *ngIf="result.years">
                {{ result.years }} {{ 'filters.counter_years' | translate }}
              </p>
            </mat-card-content>
            <button mat-button fxFlexFill
              (click)="goToFaculty(result.facultyId)">{{ 'buttons.more_details' | translate | uppercase }}</button>
              <!-- TODO verify why this buttons are not working -->
          </mat-card>
          <!-- masters results -->
          <mat-card class="custom-card" fxLayout="column" fxLayoutAlign="center center" *ngIf="studyLevel === 'Master'">
            <img mat-card-image src="{{ result.logoFaculty }}" *ngIf="result.logoFaculty">
            <img mat-card-image src="assets/university.png" *ngIf="!result.logoFaculty">
            <mat-card-content>
              <p class="dark-blue-bold-text">{{ result.name | uppercase }}</p>
              <p class="grey-text" *ngIf="result.locationFaculty">{{ result.locationFaculty | location }}</p>
              <p>{{ result.ratingFaculty ? result.ratingFaculty : 0 }} ★</p>
              <p *ngIf="result.semesters">
                {{ result.semesters }} {{ 'filters.counter_semesters' | translate }}
              </p>
              <p *ngIf="result.years">
                {{ result.years }} {{ 'filters.counter_years' | translate }}
              </p>
            </mat-card-content>
            <button mat-button fxFlexFill
              (click)="goToFaculty(result.facultyId)">{{ 'buttons.more_details' | translate | uppercase }}</button>
          </mat-card>
          <!-- doctorals results -->
          <mat-card class="custom-card" fxLayout="column" fxLayoutAlign="center center"
            *ngIf="studyLevel === 'Doctoral'">
            <img mat-card-image src="{{ result.logoFaculty }}" *ngIf="result.logoFaculty">
            <img mat-card-image src="assets/university.png" *ngIf="!result.logoFaculty">
            <mat-card-content>
              <p class="dark-blue-bold-text">{{ result.name | uppercase }}</p>
              <p class="grey-text" *ngIf="result.locationFaculty">{{ result.locationFaculty | location }}</p>
              <p>{{ result.ratingFaculty ? result.ratingFaculty : 0 }} ★</p>
              <p *ngIf="result.semesters">
                {{ result.semesters }} {{ 'filters.counter_semesters' | translate }}
              </p>
              <p *ngIf="result.years">
                {{ result.years }} {{ 'filters.counter_years' | translate }}
              </p>
            </mat-card-content>
            <button mat-button fxFlexFill
              (click)="goToFaculty(result.facultyId)">{{ 'buttons.more_details' | translate | uppercase }}</button>
          </mat-card>
        </div>
      </div>
    </div>
  </div>
</div>




<app-footer></app-footer>
